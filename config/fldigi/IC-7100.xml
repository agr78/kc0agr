<?xml version="1.0" encoding="utf-8"?>
<RIGDEF>
  <RIG>Icom IC-7100</RIG>
  <PROGRAMMER>
    Larry        K0LB
    Tested by:   K0LB, Larry Bates
    Modified by: W1HKJ, David Freese
    Tested by:   AB4NX, Larry Whited
</PROGRAMMER>
  <STATUS>
    Testing
    Version:    2.0
    Date:       9 June 2018
</STATUS>
  <TITLE>RigCAT - IC-7100</TITLE>

<!--
default settings for initial setup
-->
<TIMEOUT>50</TIMEOUT>
<RETRIES>2</RETRIES>
<WRITE_DELAY>20</WRITE_DELAY>
<INIT_DELAY>30</INIT_DELAY>
<BAUDRATE>19200</BAUDRATE>
<STOPBITS>1</STOPBITS>
<RTSCTS>false</RTSCTS>
<ECHO>false</ECHO>
<CMDPTT>true</CMDPTT>

<!--
  W1HKJ, 9 June 2018
  Changed LSB/USB to LSB-D/USB-D
-->
<MODES>
  <ELEMENT><SYMBOL>LSB-D</SYMBOL><BYTE>00</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>USB-D</SYMBOL><BYTE>01</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>AM</SYMBOL><BYTE>02</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>CW</SYMBOL><BYTE>03</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>RTTY</SYMBOL><BYTE>04</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>FM</SYMBOL><BYTE>05</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>CW-R</SYMBOL><BYTE>07</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>RTTY-R</SYMBOL><BYTE>08</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>DV</SYMBOL><BYTE>17</BYTE></ELEMENT>
</MODES>

<!-- lsb mode strings should match those given in the modes id specifier -->
<LSBMODES>
  <STRING>LSB-D</STRING>
  <STRING>RTTY</STRING>
  <STRING>CW-R</STRING>
</LSBMODES>

<!--
  Bandwith symbols are valid for SSB and CW modes.
  For RTTY the maximum bandwith is 2700Hz. For AM and Data mode
  bandwiths range from 200Hz(0) to 8kHz(39) with 200Hz space
  between the steps.
-->
<BANDWIDTHS>
  <ELEMENT><SYMBOL>50</SYMBOL><BYTE>00</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>100</SYMBOL><BYTE>01</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>150</SYMBOL><BYTE>02</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>200</SYMBOL><BYTE>03</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>250</SYMBOL><BYTE>04</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>300</SYMBOL><BYTE>05</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>350</SYMBOL><BYTE>06</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>400</SYMBOL><BYTE>07</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>450</SYMBOL><BYTE>08</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>500</SYMBOL><BYTE>09</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>600</SYMBOL><BYTE>10</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>700</SYMBOL><BYTE>11</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>800</SYMBOL><BYTE>12</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>900</SYMBOL><BYTE>13</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1000</SYMBOL><BYTE>14</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1100</SYMBOL><BYTE>15</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1200</SYMBOL><BYTE>16</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1300</SYMBOL><BYTE>17</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1400</SYMBOL><BYTE>18</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1500</SYMBOL><BYTE>19</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1600</SYMBOL><BYTE>20</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1700</SYMBOL><BYTE>21</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1800</SYMBOL><BYTE>22</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>1900</SYMBOL><BYTE>23</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2000</SYMBOL><BYTE>24</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2100</SYMBOL><BYTE>25</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2200</SYMBOL><BYTE>26</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2300</SYMBOL><BYTE>27</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2400</SYMBOL><BYTE>28</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2500</SYMBOL><BYTE>29</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2600</SYMBOL><BYTE>30</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2700</SYMBOL><BYTE>31</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2800</SYMBOL><BYTE>32</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>2900</SYMBOL><BYTE>33</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3000</SYMBOL><BYTE>34</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3100</SYMBOL><BYTE>35</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3200</SYMBOL><BYTE>36</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3300</SYMBOL><BYTE>37</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3400</SYMBOL><BYTE>38</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3500</SYMBOL><BYTE>39</BYTE></ELEMENT>
  <ELEMENT><SYMBOL>3600</SYMBOL><BYTE>40</BYTE></ELEMENT>
</BANDWIDTHS>

<REPLY>
  <SYMBOL>OK</SYMBOL>
  <SIZE>6</SIZE>
  <BYTES>FE FE E0 88</BYTES>
  <BYTE>FB</BYTE>
  <BYTE>FD</BYTE>
</REPLY>

<REPLY>
  <SYMBOL>BAD</SYMBOL>
  <SIZE>6</SIZE>
  <BYTES>FE FE E0 88</BYTES>
  <BYTE>FA</BYTE>
  <BYTE>FD</BYTE>
</REPLY>

<REPLY>
  <SYMBOL>MODE</SYMBOL>
  <SIZE>8</SIZE>
  <BYTES>FE FE E0 88</BYTES>
  <BYTE>04</BYTE>
  <DATA>
    <DTYPE>BINARY</DTYPE>
    <SIZE>1</SIZE>
  </DATA>
  <FILL>1</FILL>
  <BYTE>FD</BYTE>
</REPLY>

<REPLY>
  <SYMBOL>BW</SYMBOL>
  <SIZE>8</SIZE>
  <BYTES>FE FE E0 88</BYTES>
  <BYTES>1A 03</BYTES>
  <DATA>
    <DTYPE>BINARY</DTYPE>
    <SIZE>1</SIZE>
  </DATA>
  <BYTE>FD</BYTE>
</REPLY>

<REPLY>
  <SYMBOL>FREQ</SYMBOL>
  <SIZE>11</SIZE>
  <BYTES>FE FE E0 88</BYTES>
  <BYTE>03</BYTE>
  <DATA>
    <DTYPE>BCD</DTYPE>
    <SIZE>10</SIZE>
    <MAX>450000000</MAX>
    <MIN>30000</MIN>
    <RESOL>1</RESOL>
    <REV>true</REV>
  </DATA>
  <BYTE>FD</BYTE>
</REPLY>

<COMMAND>
  <SYMBOL>SETFREQ</SYMBOL>
  <SIZE>11</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTE>05</BYTE>
  <DATA>
    <DTYPE>BCD</DTYPE>
    <SIZE>10</SIZE>
    <MAX>450000000</MAX>
    <MIN>30000</MIN>
    <RESOL>1</RESOL>
    <REV>true</REV>
  </DATA>
  <BYTE>FD </BYTE>
  <OK>OK</OK>
  <BAD>BAD</BAD>
</COMMAND>

<COMMAND>
  <SYMBOL>GETFREQ</SYMBOL>
  <SIZE>6</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTE>03</BYTE>
  <BYTE>FD </BYTE>
  <INFO>FREQ</INFO>
</COMMAND>

<COMMAND>
  <SYMBOL>SETBW</SYMBOL>
  <SIZE>8</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTES>1A 03</BYTES>
  <DATA>
    <DTYPE>BINARY</DTYPE>
    <SIZE>1</SIZE>
  </DATA>
  <BYTE>FD</BYTE>
  <OK>OK</OK>
  <BAD>BAD</BAD>
</COMMAND>

<COMMAND>
  <SYMBOL>GETBW</SYMBOL>
  <SIZE>7</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTES>1A 03</BYTES>
  <BYTE>FD</BYTE>
  <INFO>BW</INFO>
</COMMAND>

<!--
  W1HKJ, 9 June 2018
  Added DATA mode command string
-->
<COMMAND>
  <SYMBOL>SETMODE</SYMBOL>
  <SIZE>16</SIZE>
  <BYTES>FE FE 88 E0 06</BYTES>
  <DATA>
    <DTYPE>BYTES</DTYPE>
    <SIZE>1</SIZE>
  </DATA>
  <BYTE>FD </BYTE>
  <BYTES>FE FE 88 E0 1A 06 01 03 FD</BYTES>
  <OK>OK</OK>
  <BAD>BAD</BAD>
</COMMAND>

<COMMAND>
  <SYMBOL>GETMODE</SYMBOL>
  <SIZE>6</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTE>04</BYTE>
  <BYTE>FD</BYTE>
  <INFO>MODE</INFO>
</COMMAND>

<COMMAND>
  <SYMBOL>PTTON</SYMBOL>
  <SIZE>8</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTES>1C 00 01</BYTES>
  <BYTE>FD</BYTE>
  <OK>OK</OK>
  <BAD>BAD</BAD>
</COMMAND>

<COMMAND>
  <SYMBOL>PTTOFF</SYMBOL>
  <SIZE>8</SIZE>
  <BYTES>FE FE 88 E0</BYTES>
  <BYTES>1C 00 00</BYTES>
  <BYTE>FD</BYTE>
  <OK>OK</OK>
  <BAD>BAD</BAD>
</COMMAND>
  
  
<!--
========================================================================
     controls added by W1HKJ 
========================================================================
-->

<!-- smeter scale mapping -->
<SMETER> 0,0; 241,100 </SMETER>

<!-- power meter scale mapping -->
<PMETER>
  0,0; 213,100
</PMETER>

<REPLY>
  <SYMBOL>SMETER</SYMBOL>
  <SIZE>9</SIZE>
    <BYTES>FE FE E0 88 15 02</BYTES>
    <DATA>
        <DTYPE>BCD</DTYPE>
        <SIZE>3</SIZE>
        <MAX>255</MAX>
        <MIN>0</MIN>
        <RESOL>1</RESOL>
        <REV>false</REV>
     </DATA>
    <BYTE>FD</BYTE>
</REPLY>

<COMMAND>
  <SYMBOL>GET_SMETER</SYMBOL>
  <SIZE>7</SIZE>
  <BYTES>FE FE 88 E0 15 02 FD</BYTES>
  <INFO>SMETER</INFO>
</COMMAND>

<REPLY>
  <SYMBOL>PWRMETER</SYMBOL>
  <SIZE>9</SIZE>
    <BYTES>FE FE E0 88 15 11</BYTES>
    <DATA>
        <DTYPE>BCD</DTYPE>
        <SIZE>3</SIZE>
        <MAX>255</MAX>
        <MIN>0</MIN>
        <RESOL>1</RESOL>
        <REV>false</REV>
     </DATA>
    <BYTE>FD</BYTE>
</REPLY>

<COMMAND>
  <SYMBOL>GET_PWRMETER</SYMBOL>
  <SIZE>7</SIZE>
  <BYTES>FE FE 88 E0 15 11 FD</BYTES>
  <INFO>PWRMETER</INFO>
</COMMAND>


<!--  power level set -->
<PWRLEVEL>
    0, 0;   3, 1;   6, 2;   8, 3;  11, 4;  13, 5;  16, 6;  18, 7;  21, 8; 23, 9;
   25,10;  29,11;  31,12;  34,13;  36,14;  39,15;  41,16;  44,17;  46,18; 49,19;
   51,20;  54,21;  57,22;  59,23;  62,24;  65,25;  67,26;  69,27;  72,28; 74,29;
   77,30;  80,31;  82,32;  85,33;  87,34;  90,35;  92,36;  95,37;  97,38; 100,39;
  102,40; 105,41; 108,42; 110,43; 113,44; 115;45; 118,46; 120,47; 123,48; 125,49;
  128,50; 131,51; 133,52; 136,53; 138,54; 142,55; 143,56; 146,57; 148,58; 151,59;
  153,60; 156,61; 159,62; 161,63; 165,64; 166,65; 170,66; 172,67; 175,68; 177,69;
  179,70; 183,71; 185,72; 188,73; 190,74; 192,75; 194,76; 197,77; 199,78; 202,79;
  205,80; 208,81; 210,82; 212,83; 215,84; 217,85; 220,86; 222,87; 225,88; 227,89;
  230,90; 234,91; 236,92; 239,93; 241,94; 243,95; 246,96; 248,97; 250,98; 253,99;
  255,100;
</PWRLEVEL>

<REPLY>
  <SYMBOL>PWRLEVEL</SYMBOL>
  <SIZE>9</SIZE>
  <BYTES>FE FE E0 88 14 0A</BYTES>
  <DATA>
    <DTYPE>BCD</DTYPE>
    <SIZE>3</SIZE>
  </DATA>
  <BYTE>FD</BYTE>
</REPLY>

<COMMAND>
  <SYMBOL>GET_PWRLEVEL</SYMBOL>
  <SIZE>7</SIZE>
  <BYTES>FE FE 88 E0 14 0A FD</BYTES>
  <INFO>PWRLEVEL</INFO>
</COMMAND>

<COMMAND>
  <SYMBOL>SET_PWRLEVEL</SYMBOL>
  <SIZE>9</SIZE>
  <BYTES>FE FE 88 E0 14 0A</BYTES>
  <DATA>
    <DTYPE>BCD</DTYPE>
    <SIZE>3</SIZE>
  </DATA>
  <BYTE>FD</BYTE>
</COMMAND>

<!-- NOTCH ON/OFF VALUE -->

<NOTCH>
  53,0; 255,4040;
</NOTCH>

<COMMAND>
    <SYMBOL>SET_NOTCH_ON</SYMBOL>
    <SIZE>8</SIZE>
    <BYTES>FE FE 88 E0 16 48 01 FD</BYTES>
</COMMAND>

<COMMAND>
    <SYMBOL>SET_NOTCH_OFF</SYMBOL>
    <SIZE>8</SIZE>
    <BYTES>FE FE 88 E0 16 48 00 FD</BYTES>
</COMMAND>

<COMMAND>
    <SYMBOL>SET_NOTCH_VAL</SYMBOL>
    <SIZE>9</SIZE>
    <BYTES>FE FE 88 E0 14 0D</BYTES>
    <DATA>
        <DTYPE>BCD</DTYPE>
        <SIZE>3</SIZE>
    </DATA>
    <BYTE>FD</BYTE>
</COMMAND>

<REPLY>
    <SYMBOL>NOTCH_ON</SYMBOL>
    <SIZE>8</SIZE>
    <BYTES>FE FE E0 88 16 48 01 FD</BYTES>
</REPLY>

<COMMAND>
    <SYMBOL>GET_NOTCH_ON</SYMBOL>
    <SIZE>7</SIZE>
    <BYTES>FE FE 88 E0 16 48 FD</BYTES>
    <INFO>NOTCH_ON</INFO>
</COMMAND>

<REPLY>
    <SYMBOL>NOTCH</SYMBOL>
    <SIZE>9</SIZE>
    <BYTES>FE FE E0 88 14 0D</BYTES>
    <DATA>
        <DTYPE>BCD</DTYPE>
        <SIZE>3</SIZE>
    </DATA>
    <BYTE>FD</BYTE>
</REPLY>

<COMMAND>
    <SYMBOL>GET_NOTCH</SYMBOL>
    <SIZE>7</SIZE>
    <BYTES>FE FE 88 E0 14 0D FD</BYTES>
    <INFO>NOTCH</INFO>
</COMMAND>

</RIGDEF>
